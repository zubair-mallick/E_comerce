import{n as c,w as x,d as m,r as p,j as e,x as g,o as y,p as j,_ as v}from"./index-43G1P5X5.js";import{B as f}from"./index-D-Sf4zMh.js";const b=()=>{const{cartItems:o,total:d}=c(t=>t.cartReducer),{user:r}=c(t=>t.userReducer),i=x(),u=m(),[a,l]=p.useState({address:"",city:"",state:"",country:"",pincode:""}),n=t=>{l(s=>({...s,[t.target.name]:t.target.value}))},h=async t=>{t.preventDefault(),u(g(a));try{const{data:s}=await y.post(`${j}/api/v1/payment/create?id=${r==null?void 0:r._id}`,{amount:d},{headers:{"Content-Type":"application/json"}});i("/pay",{state:s.clientSecret})}catch(s){console.log(s),v.error("Something went wrong")}};return p.useEffect(()=>{if(o.length<=0)return i("/cart")},[o]),e.jsxs("div",{className:"shipping",children:[e.jsx("button",{className:"back-btn",onClick:()=>i("/cart"),children:e.jsx(f,{})}),e.jsxs("form",{onSubmit:h,children:[e.jsx("h1",{children:"Shipping Address"}),e.jsx("input",{required:!0,type:"text",placeholder:"Address",name:"address",value:a.address,onChange:n}),e.jsx("input",{required:!0,type:"text",placeholder:"City",name:"city",value:a.city,onChange:n}),e.jsx("input",{required:!0,type:"text",placeholder:"State",name:"state",value:a.state,onChange:n}),e.jsxs("select",{name:"country",required:!0,value:a.country,onChange:n,children:[e.jsx("option",{value:"",children:"Choose Country"}),e.jsx("option",{value:"india",children:"India"})]}),e.jsx("input",{required:!0,type:"text",placeholder:"Pin Code",name:"pincode",value:a.pincode,onChange:n}),e.jsx("button",{type:"submit",children:"Pay Now"})]})]})};export{b as default};
